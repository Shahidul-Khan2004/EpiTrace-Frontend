exports.id=393,exports.ids=[393],exports.modules={103:(a,b,c)=>{"use strict";c.d(b,{CV:()=>f,NH:()=>g,Rd:()=>j,XR:()=>k,ei:()=>i,lC:()=>e,o5:()=>l,sk:()=>h,t0:()=>m});var d=c(2703);function e(a,b){return(0,d.A)("/monitor/create",{method:"POST",body:b,token:a,requiresAuth:!0}).then(a=>a.data)}function f(a,b=50,c=0){let e=new URLSearchParams({limit:String(b),offset:String(c)});return(0,d.A)(`/monitor?${e.toString()}`,{method:"GET",token:a,requiresAuth:!0}).then(a=>a.data)}function g(a,b){return(0,d.A)(`/monitor/${b}`,{method:"GET",token:a,requiresAuth:!0}).then(a=>a.data)}function h(a,b,c){return(0,d.A)(`/monitor/${b}`,{method:"PATCH",body:c,token:a,requiresAuth:!0}).then(a=>a.data)}function i(a,b){return(0,d.A)(`/monitor/${b}`,{method:"DELETE",token:a,requiresAuth:!0})}function j(a,b){return(0,d.A)(`/monitor/start/${b}`,{method:"POST",token:a,requiresAuth:!0})}function k(a,b){return(0,d.A)(`/monitor/pause/${b}`,{method:"POST",token:a,requiresAuth:!0})}function l(a,b){return(0,d.A)(`/monitor/resume/${b}`,{method:"POST",token:a,requiresAuth:!0})}function m(a,b,c=100,e=0){let f=new URLSearchParams({limit:String(c),offset:String(e)});return(0,d.A)(`/monitor/${b}/history?${f.toString()}`,{method:"GET",token:a,requiresAuth:!0}).then(a=>a.data)}},690:(a,b,c)=>{"use strict";c.d(b,{P:()=>e});var d=c(2703);function e(a){if(a instanceof d.h){let b=a.payload;if(b&&"object"==typeof b){if("error"in b&&"string"==typeof b.error)return b.error;if("message"in b&&"string"==typeof b.message)return b.message;if("errors"in b&&Array.isArray(b.errors)){let a=b.errors[0];if(a&&"object"==typeof a&&"message"in a&&"string"==typeof a.message)return a.message}}return a.message}return a instanceof Error?a.message:"Unexpected error. Please try again."}},917:()=>{},1135:()=>{},1472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>k,metadata:()=>i,viewport:()=>j});var d=c(5338),e=c(6400),f=c.n(e),g=c(919),h=c.n(g);c(1135);let i={title:"EpiTrace Frontend",description:"Monitor management UI for EpiTrace backend"},j={width:"device-width",initialScale:1,viewportFit:"cover"};function k({children:a}){return(0,d.jsx)("html",{lang:"en",className:`${f().variable} ${h().variable}`,children:(0,d.jsx)("body",{className:"antialiased",children:a})})}},2356:(a,b,c)=>{"use strict";c.d(b,{q:()=>f});var d=c(1124),e=c(9187);function f({status:a,isActive:b}){let c=b?"UP"===a?"success":"danger":"warning",f=b?a??"UNKNOWN":"PAUSED";return"PAUSED"===f||"RESUMED"===f?(0,d.jsx)("span",{className:"text-xs font-semibold tracking-wide text-slate-700",children:f}):(0,d.jsx)(e.E,{tone:c,children:f})}},2703:(a,b,c)=>{"use strict";c.d(b,{h:()=>f,A:()=>g});var d=c(4460);let e={apiBaseUrl:"/api/backend".replace(/\/$/,"")};class f extends Error{constructor(a,b,c){super(a),this.name="ApiError",this.status=b,this.payload=c}}async function g(a,b={}){var c;let h=new Headers(b.headers??{});if(void 0===b.body||h.has("Content-Type")||h.set("Content-Type","application/json"),b.requiresAuth){let a=b.token??(0,d.Pt)();a&&h.set("Authorization",`Bearer ${a}`)}let i=await fetch(a.startsWith("http://")||a.startsWith("https://")?a:a.startsWith("/")?`${e.apiBaseUrl}${a}`:`${e.apiBaseUrl}/${a}`,{method:b.method??"GET",headers:h,body:void 0!==b.body?JSON.stringify(b.body):void 0,cache:"no-store"}),j=await i.text(),k=null;if(j)try{k=JSON.parse(j)}catch{k=j}if(!i.ok){let a=i.statusText||"Request failed";throw new f(!(c=k)||"object"!=typeof c?a:"error"in c&&"string"==typeof c.error?c.error:"message"in c&&"string"==typeof c.message?c.message:a,i.status,k)}return k}},2776:(a,b,c)=>{"use strict";c.d(b,{b:()=>q});var d=c(1124),e=c(9087),f=c(5284),g=c(3758),h=c(5595);function i({label:a,className:b,error:c,id:e,children:f,...g}){let i=e??a.toLowerCase().replace(/\s+/g,"-");return(0,d.jsxs)("label",{className:"space-y-2",htmlFor:i,children:[(0,d.jsx)("span",{className:"text-sm font-medium text-slate-700",children:a}),(0,d.jsx)("select",{id:i,className:(0,h.cn)("w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none transition focus:border-slate-500 focus:ring-2 focus:ring-slate-200",c?"border-rose-400 focus:border-rose-500 focus:ring-rose-100":"",b),...g,children:f}),c?(0,d.jsx)("span",{className:"text-xs text-rose-600",children:c}):null]})}function j({label:a,className:b,error:c,id:e,...f}){let g=e??a.toLowerCase().replace(/\s+/g,"-");return(0,d.jsxs)("label",{className:"space-y-2",htmlFor:g,children:[(0,d.jsx)("span",{className:"text-sm font-medium text-slate-700",children:a}),(0,d.jsx)("textarea",{id:g,className:(0,h.cn)("min-h-[110px] w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none transition placeholder:text-slate-400 focus:border-slate-500 focus:ring-2 focus:ring-slate-200",c?"border-rose-400 focus:border-rose-500 focus:ring-rose-100":"",b),...f}),c?(0,d.jsx)("span",{className:"text-xs text-rose-600",children:c}):null]})}function k(a){if(null==a)return"";if("string"==typeof a)return a;try{return JSON.stringify(a,null,2)}catch{return""}}function l(a,b){if(a.trim())try{return JSON.parse(a)}catch{throw Error(`${b} must be valid JSON.`)}}var m=c(8301);let n=["slack","discord"],o={name:"",url:"",repoLink:"",method:"GET",notificationProvider:"",notificationWebhookUrl:"",requestHeader:"",requestBody:"",checkInterval:"10",timeout:"5",isActive:!1};function p(a){return a?{name:a.name??"",url:a.url??"",repoLink:a.repo_link??"",method:a.method??"GET",notificationProvider:a.notification_provider??"",notificationWebhookUrl:a.notification_webhook_url??"",requestHeader:k(a.request_header),requestBody:k(a.request_body),checkInterval:String(a.check_interval??10),timeout:String(a.timeout??5),isActive:!!a.is_active}:o}function q({mode:a,initialValues:b,onSubmit:c,isSubmitting:h=!1,submitLabel:k}){let[q,r]=(0,m.useState)(()=>p(b)),[s,t]=(0,m.useState)(null);(0,m.useMemo)(()=>p(b),[b]);let u=(a,b)=>{r(c=>({...c,[a]:b})),t(null)},v=async b=>{b.preventDefault();let d=Number(q.checkInterval),e=Number(q.timeout),f=q.notificationProvider,g=q.notificationWebhookUrl.trim();if(!q.name.trim())return void t("Name is required.");if(!q.url.trim())return void t("URL is required.");if(!q.repoLink.trim())return void t("Repository link is required.");if(!Number.isInteger(d)||d<10)return void t("Check interval must be an integer of at least 10 seconds.");if(!Number.isInteger(e)||e<1)return void t("Timeout must be an integer of at least 1 second.");if("create"===a&&!f)return void t("Notification provider is required.");if(f&&!n.includes(f))return void t("Notification provider must be either slack or discord.");if("create"===a&&!g)return void t("Notification webhook URL is required.");if(g&&!function(a){try{let b=new URL(a);return"https:"===b.protocol||"http:"===b.protocol}catch{return!1}}(g))return void t("Notification webhook URL must be a valid URL.");try{let b=l(q.requestHeader,"Request headers"),h=l(q.requestBody,"Request body");if(void 0!==b&&("object"!=typeof b||null===b||Array.isArray(b)))throw Error("Request headers must be a JSON object.");if("create"===a){await c({name:q.name,url:q.url,repo_link:q.repoLink,method:q.method,request_header:b,request_body:h,check_interval:d,timeout:e,is_active:q.isActive,notification_provider:f,notification_webhook_url:g}),r(o);return}await c({name:q.name,url:q.url,repo_link:q.repoLink,method:q.method,request_header:b,request_body:h,check_interval:d,timeout:e,...f?{notification_provider:f}:{},...g?{notification_webhook_url:g}:{}})}catch(a){if(a instanceof Error)return void t(a.message);t("Unable to submit monitor form.")}};return(0,d.jsxs)("form",{className:"space-y-6",onSubmit:v,children:[s?(0,d.jsx)(e.F,{message:s,tone:"error"}):null,(0,d.jsxs)("div",{className:"space-y-5",children:[(0,d.jsx)(g.p,{label:"Monitor Name",value:q.name,onChange:a=>u("name",a.target.value),placeholder:"Primary API",required:!0}),(0,d.jsx)(g.p,{label:"Target URL",type:"url",value:q.url,onChange:a=>u("url",a.target.value),placeholder:"https://example.com/health",required:!0}),(0,d.jsx)(g.p,{label:"Repository Link",type:"url",value:q.repoLink,onChange:a=>u("repoLink",a.target.value),placeholder:"https://github.com/org/repository",required:!0}),(0,d.jsxs)("div",{className:"grid gap-5 sm:grid-cols-2",children:[(0,d.jsxs)(i,{label:"Notification Provider",value:q.notificationProvider,onChange:a=>u("notificationProvider",a.target.value),required:"create"===a,children:[(0,d.jsx)("option",{value:"",disabled:"create"===a,children:"create"===a?"Select a provider":"No change"}),(0,d.jsx)("option",{value:"slack",children:"Slack"}),(0,d.jsx)("option",{value:"discord",children:"Discord"})]}),(0,d.jsx)(g.p,{label:"Notification Webhook URL",type:"url",value:q.notificationWebhookUrl,onChange:a=>u("notificationWebhookUrl",a.target.value),placeholder:"https://hooks.slack.com/services/XXX/YYY/ZZZ",required:"create"===a})]}),(0,d.jsxs)("div",{className:"grid gap-5 sm:grid-cols-2",children:[(0,d.jsxs)(i,{label:"HTTP Method",value:q.method,onChange:a=>u("method",a.target.value),children:[(0,d.jsx)("option",{value:"GET",children:"GET"}),(0,d.jsx)("option",{value:"POST",children:"POST"}),(0,d.jsx)("option",{value:"PUT",children:"PUT"}),(0,d.jsx)("option",{value:"PATCH",children:"PATCH"}),(0,d.jsx)("option",{value:"DELETE",children:"DELETE"})]}),(0,d.jsx)(g.p,{label:"Timeout (seconds)",type:"number",min:1,step:1,value:q.timeout,onChange:a=>u("timeout",a.target.value),required:!0})]}),(0,d.jsx)(g.p,{label:"Check Interval (seconds)",type:"number",min:10,step:1,value:q.checkInterval,onChange:a=>u("checkInterval",a.target.value),required:!0}),(0,d.jsx)(j,{label:"Request Headers (JSON, optional)",value:q.requestHeader,onChange:a=>u("requestHeader",a.target.value),placeholder:'{"Authorization": "Bearer token"}'}),(0,d.jsx)(j,{label:"Request Body (JSON, optional)",value:q.requestBody,onChange:a=>u("requestBody",a.target.value),placeholder:'{"key": "value"}'}),"create"===a?(0,d.jsxs)("label",{className:"flex items-start gap-3 rounded-xl border border-slate-200 bg-slate-50/80 p-3 text-sm font-medium text-slate-700",children:[(0,d.jsx)("input",{type:"checkbox",checked:q.isActive,onChange:a=>u("isActive",a.target.checked),className:"mt-0.5 h-4 w-4 rounded border-slate-300 text-slate-900 focus:ring-slate-300"}),"Start monitor immediately after creating"]}):null]}),(0,d.jsx)(f.$,{type:"submit",loading:h,className:"w-full sm:w-auto",children:k??("create"===a?"Create Monitor":"Update Monitor")})]})}},3131:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,4160,23)),Promise.resolve().then(c.t.bind(c,1603,23)),Promise.resolve().then(c.t.bind(c,8495,23)),Promise.resolve().then(c.t.bind(c,5170,23)),Promise.resolve().then(c.t.bind(c,7526,23)),Promise.resolve().then(c.t.bind(c,8922,23)),Promise.resolve().then(c.t.bind(c,9234,23)),Promise.resolve().then(c.t.bind(c,2263,23)),Promise.resolve().then(c.bind(c,2146))},3245:(a,b,c)=>{"use strict";c.d(b,{q:()=>f});var d=c(1124),e=c(5284);function f({monitor:a,pendingAction:b,onStart:c,onPause:f,onResume:g,onDelete:h}){let i=a.is_active?"pause":a.last_checked_at?"resume":"start";return(0,d.jsxs)("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:flex-wrap sm:items-center",children:["pause"===i?(0,d.jsx)(e.$,{variant:"secondary",loading:"pause"===b,className:"w-full sm:w-auto",onClick:()=>void f(),children:"Pause"}):"resume"===i?(0,d.jsx)(e.$,{variant:"secondary",loading:"resume"===b,className:"w-full sm:w-auto",onClick:()=>void g(),children:"Resume"}):(0,d.jsx)(e.$,{variant:"secondary",loading:"start"===b,className:"w-full sm:w-auto",onClick:()=>void c(),children:"Start"}),(0,d.jsx)(e.$,{variant:"danger",loading:"delete"===b,className:"w-full sm:w-auto",onClick:()=>void h(),children:"Delete"})]})}},3758:(a,b,c)=>{"use strict";c.d(b,{p:()=>f});var d=c(1124),e=c(5595);function f({label:a,className:b,error:c,id:f,...g}){let h=f??a.toLowerCase().replace(/\s+/g,"-");return(0,d.jsxs)("label",{className:"space-y-2",htmlFor:h,children:[(0,d.jsx)("span",{className:"text-sm font-medium text-slate-700",children:a}),(0,d.jsx)("input",{id:h,className:(0,e.cn)("w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none transition placeholder:text-slate-400 focus:border-slate-500 focus:ring-2 focus:ring-slate-200",c?"border-rose-400 focus:border-rose-500 focus:ring-rose-100":"",b),...g}),c?(0,d.jsx)("span",{className:"text-xs text-rose-600",children:c}):null]})}},4460:(a,b,c)=>{"use strict";c.d(b,{AA:()=>f,Pt:()=>d,aK:()=>e,rE:()=>g});function d(){return null}function e(){return null}function f(a,b){}function g(){}},4837:()=>{},5284:(a,b,c)=>{"use strict";c.d(b,{$:()=>g});var d=c(1124),e=c(5595);let f={primary:"bg-slate-900 text-white shadow-sm hover:bg-slate-800 focus-visible:ring-slate-900",secondary:"bg-white text-slate-900 border border-slate-300 hover:bg-slate-50 focus-visible:ring-slate-400",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus-visible:ring-slate-300",danger:"bg-rose-600 text-white hover:bg-rose-500 focus-visible:ring-rose-400"};function g({variant:a="primary",loading:b=!1,className:c,children:g,disabled:h,...i}){return(0,d.jsxs)("button",{className:(0,e.cn)("inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60",f[a],c),disabled:h||b,...i,children:[b?(0,d.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-r-transparent"}):null,(0,d.jsx)("span",{children:g})]})}},5595:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(3249),e=c(8829);function f(...a){return(0,e.QP)((0,d.$)(a))}},6490:(a,b,c)=>{"use strict";c.d(b,{G:()=>i});var d=c(1124),e=c(8365),f=c(5284),g=c(3991),h=c.n(g);function i({title:a,subtitle:b,userEmail:c,onLogout:g,children:i}){return(0,d.jsxs)("div",{className:"mx-auto w-full max-w-6xl px-4 py-6 sm:px-6 sm:py-8 lg:px-8",children:[(0,d.jsx)("header",{className:"mb-6 rounded-3xl border border-slate-200 bg-white/90 p-4 shadow-sm backdrop-blur sm:mb-8 sm:p-5",children:(0,d.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)(h(),{href:"/dashboard",className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-700",children:"EpiTrace Dashboard"}),(0,d.jsx)("h1",{className:"font-[family-name:var(--font-heading)] text-2xl leading-tight text-slate-900 sm:text-3xl",children:a}),(0,d.jsx)("p",{className:"text-sm text-slate-600",children:b})]}),(0,d.jsxs)("div",{className:"flex w-full flex-wrap items-center gap-2 sm:gap-3 md:w-auto md:justify-end",children:[(0,d.jsx)(e.n,{}),c?(0,d.jsx)("span",{className:"max-w-full break-all rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-medium text-slate-600",children:c}):null,g?(0,d.jsx)(f.$,{variant:"secondary",onClick:g,children:"Logout"}):null]})]})}),i]})}},8365:(a,b,c)=>{"use strict";c.d(b,{n:()=>f});var d=c(1124);c(2703);var e=c(8301);function f(){let[a,b]=(0,e.useState)({status:"checking",label:"Checking backend"}),c="up"===a.status?"bg-emerald-500":"down"===a.status?"bg-rose-500":"bg-amber-400";return(0,d.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-medium text-slate-600 shadow-sm",children:[(0,d.jsx)("span",{className:`h-2 w-2 rounded-full ${c}`}),(0,d.jsx)("span",{children:a.label})]})}},8622:(a,b,c)=>{"use strict";c.d(b,{N:()=>h,O:()=>g});var d=c(4460),e=c(2378),f=c(8301);function g(){(0,e.useRouter)();let[a,b]=(0,f.useState)(!0);return{isChecking:a}}function h(){let a=(0,e.useRouter)(),[b,c]=(0,f.useState)(null),[g,h]=(0,f.useState)(!1),i=(0,f.useCallback)(()=>{(0,d.rE)(),a.replace("/login")},[a]);return{session:b,token:b?.token??null,isReady:g,logout:i}}},9059:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,1170,23)),Promise.resolve().then(c.t.bind(c,3597,23)),Promise.resolve().then(c.t.bind(c,6893,23)),Promise.resolve().then(c.t.bind(c,9748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,9576,23)),Promise.resolve().then(c.t.bind(c,3041,23)),Promise.resolve().then(c.t.bind(c,1384,23))},9087:(a,b,c)=>{"use strict";c.d(b,{F:()=>g});var d=c(1124),e=c(5595);let f={error:"border-rose-200 bg-rose-50 text-rose-700",success:"border-transparent bg-transparent text-emerald-700",info:"border-transparent bg-transparent text-slate-700"};function g({message:a,tone:b="info"}){return(0,d.jsx)("div",{className:(0,e.cn)("rounded-xl border px-3 py-2 text-sm font-medium",f[b]),role:"alert",children:a})}},9187:(a,b,c)=>{"use strict";c.d(b,{E:()=>g});var d=c(1124),e=c(5595);let f={neutral:"bg-slate-100 text-slate-700",success:"bg-emerald-100 text-emerald-700",danger:"bg-rose-100 text-rose-700",warning:"bg-amber-100 text-amber-700"};function g({tone:a="neutral",className:b,...c}){return(0,d.jsx)("span",{className:(0,e.cn)("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",f[a],b),...c})}}};