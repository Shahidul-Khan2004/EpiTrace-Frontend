exports.id=797,exports.ids=[797],exports.modules={690:(a,b,c)=>{"use strict";c.d(b,{P:()=>e});var d=c(2703);function e(a){if(a instanceof d.h){let b=a.payload;if(b&&"object"==typeof b){if("error"in b&&"string"==typeof b.error)return b.error;if("message"in b&&"string"==typeof b.message)return b.message;if("errors"in b&&Array.isArray(b.errors)){let a=b.errors[0];if(a&&"object"==typeof a&&"message"in a&&"string"==typeof a.message)return a.message}}return a.message}return a instanceof Error?a.message:"Unexpected error. Please try again."}},917:()=>{},1135:()=>{},1472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>k,metadata:()=>i,viewport:()=>j});var d=c(5338),e=c(6400),f=c.n(e),g=c(919),h=c.n(g);c(1135);let i={title:"EpiTrace Frontend",description:"Monitor management UI for EpiTrace backend"},j={width:"device-width",initialScale:1,viewportFit:"cover"};function k({children:a}){return(0,d.jsx)("html",{lang:"en",className:`${f().variable} ${h().variable}`,children:(0,d.jsx)("body",{className:"antialiased",children:a})})}},2703:(a,b,c)=>{"use strict";c.d(b,{h:()=>f,A:()=>g});var d=c(4460);let e={apiBaseUrl:"/api/backend".replace(/\/$/,"")};class f extends Error{constructor(a,b,c){super(a),this.name="ApiError",this.status=b,this.payload=c}}async function g(a,b={}){var c;let h=new Headers(b.headers??{});if(void 0===b.body||h.has("Content-Type")||h.set("Content-Type","application/json"),b.requiresAuth){let a=b.token??(0,d.Pt)();a&&h.set("Authorization",`Bearer ${a}`)}let i=await fetch(a.startsWith("http://")||a.startsWith("https://")?a:a.startsWith("/")?`${e.apiBaseUrl}${a}`:`${e.apiBaseUrl}/${a}`,{method:b.method??"GET",headers:h,body:void 0!==b.body?JSON.stringify(b.body):void 0,cache:"no-store"}),j=await i.text(),k=null;if(j)try{k=JSON.parse(j)}catch{k=j}if(!i.ok){let a=i.statusText||"Request failed";throw new f(!(c=k)||"object"!=typeof c?a:"error"in c&&"string"==typeof c.error?c.error:"message"in c&&"string"==typeof c.message?c.message:a,i.status,k)}return k}},3131:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,4160,23)),Promise.resolve().then(c.t.bind(c,1603,23)),Promise.resolve().then(c.t.bind(c,8495,23)),Promise.resolve().then(c.t.bind(c,5170,23)),Promise.resolve().then(c.t.bind(c,7526,23)),Promise.resolve().then(c.t.bind(c,8922,23)),Promise.resolve().then(c.t.bind(c,9234,23)),Promise.resolve().then(c.t.bind(c,2263,23)),Promise.resolve().then(c.bind(c,2146))},3758:(a,b,c)=>{"use strict";c.d(b,{p:()=>f});var d=c(1124),e=c(5595);function f({label:a,className:b,error:c,id:f,...g}){let h=f??a.toLowerCase().replace(/\s+/g,"-");return(0,d.jsxs)("label",{className:"space-y-2",htmlFor:h,children:[(0,d.jsx)("span",{className:"text-sm font-medium text-slate-700",children:a}),(0,d.jsx)("input",{id:h,className:(0,e.cn)("w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none transition placeholder:text-slate-400 focus:border-slate-500 focus:ring-2 focus:ring-slate-200",c?"border-rose-400 focus:border-rose-500 focus:ring-rose-100":"",b),...g}),c?(0,d.jsx)("span",{className:"text-xs text-rose-600",children:c}):null]})}},4361:(a,b,c)=>{"use strict";c.d(b,{T:()=>o});var d=c(1124),e=c(9087),f=c(5284),g=c(3758),h=c(2703),i=c(4460),j=c(690),k=c(2378),l=c(8301),m=c(3991),n=c.n(m);function o({mode:a}){let{values:b,updateValue:c,submit:m,isSubmitting:o,errorMessage:p}=function(a){let b=(0,k.useRouter)(),[c,d]=(0,l.useState)({email:"",password:"",rePassword:""}),[e,f]=(0,l.useState)(!1),[g,m]=(0,l.useState)(null),n=async d=>{if(d.preventDefault(),"register"===a&&c.password!==c.rePassword)return void m("Passwords do not match.");f(!0),m(null);try{var e,g;let d="register"===a?await (e={email:c.email,password:c.password,rePassword:c.rePassword},(0,h.A)("/auth/register",{method:"POST",body:e,requiresAuth:!1})):await (g={email:c.email,password:c.password},(0,h.A)("/auth/login",{method:"POST",body:g,requiresAuth:!1}));(0,i.AA)(d.token,d.user),b.replace("/dashboard")}catch(a){m((0,j.P)(a))}finally{f(!1)}};return{values:c,updateValue:(a,b)=>{d(c=>({...c,[a]:b})),m(null)},submit:n,isSubmitting:e,errorMessage:g}}(a);return(0,d.jsxs)("form",{className:"space-y-6",onSubmit:m,children:[p?(0,d.jsx)(e.F,{message:p,tone:"error"}):null,(0,d.jsxs)("div",{className:"space-y-5",children:[(0,d.jsx)(g.p,{label:"Email",type:"email",autoComplete:"email",value:b.email,onChange:a=>c("email",a.target.value),required:!0}),(0,d.jsx)(g.p,{label:"Password",type:"password",autoComplete:"login"===a?"current-password":"new-password",value:b.password,onChange:a=>c("password",a.target.value),required:!0}),"register"===a?(0,d.jsx)(g.p,{label:"Confirm Password",type:"password",autoComplete:"new-password",value:b.rePassword,onChange:a=>c("rePassword",a.target.value),required:!0}):null]}),(0,d.jsx)(f.$,{className:"w-full",loading:o,type:"submit",children:"register"===a?"Create Account":"Login"}),(0,d.jsxs)("p",{className:"pt-1 text-center text-sm text-slate-600",children:["register"===a?"Already have an account?":"Need an account?"," "," ",(0,d.jsx)(n(),{href:"register"===a?"/login":"/register",className:"font-semibold text-slate-900 underline decoration-slate-300 underline-offset-4",children:"register"===a?"Login instead":"Register here"})]})]})}},4460:(a,b,c)=>{"use strict";c.d(b,{AA:()=>f,Pt:()=>d,aK:()=>e,rE:()=>g});function d(){return null}function e(){return null}function f(a,b){}function g(){}},4837:()=>{},5284:(a,b,c)=>{"use strict";c.d(b,{$:()=>g});var d=c(1124),e=c(5595);let f={primary:"bg-slate-900 text-white shadow-sm hover:bg-slate-800 focus-visible:ring-slate-900",secondary:"bg-white text-slate-900 border border-slate-300 hover:bg-slate-50 focus-visible:ring-slate-400",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus-visible:ring-slate-300",danger:"bg-rose-600 text-white hover:bg-rose-500 focus-visible:ring-rose-400"};function g({variant:a="primary",loading:b=!1,className:c,children:g,disabled:h,...i}){return(0,d.jsxs)("button",{className:(0,e.cn)("inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60",f[a],c),disabled:h||b,...i,children:[b?(0,d.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-r-transparent"}):null,(0,d.jsx)("span",{children:g})]})}},5595:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(3249),e=c(8829);function f(...a){return(0,e.QP)((0,d.$)(a))}},6379:(a,b,c)=>{"use strict";c.d(b,{z:()=>f});var d=c(1124),e=c(8365);function f({title:a,subtitle:b,children:c}){return(0,d.jsxs)("main",{className:"relative flex min-h-dvh items-center justify-center overflow-hidden px-4 py-8 sm:px-6 sm:py-12 lg:px-8",children:[(0,d.jsx)("div",{className:"absolute left-0 top-8 h-64 w-64 rounded-full bg-emerald-100/70 blur-3xl","aria-hidden":!0}),(0,d.jsx)("div",{className:"absolute bottom-8 right-0 h-72 w-72 rounded-full bg-sky-100/60 blur-3xl","aria-hidden":!0}),(0,d.jsxs)("section",{className:"relative z-10 w-full max-w-md rounded-3xl border border-slate-200/70 bg-white/90 p-5 shadow-[0_30px_80px_-40px_rgba(15,23,42,0.45)] backdrop-blur sm:p-7",children:[(0,d.jsxs)("header",{className:"mb-6 space-y-4",children:[(0,d.jsx)("div",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-700",children:"EpiTrace Control"}),(0,d.jsx)(e.n,{}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h1",{className:"font-[family-name:var(--font-heading)] text-2xl text-slate-900 sm:text-3xl",children:a}),(0,d.jsx)("p",{className:"text-sm text-slate-600",children:b})]})]}),c]})]})}},8365:(a,b,c)=>{"use strict";c.d(b,{n:()=>f});var d=c(1124);c(2703);var e=c(8301);function f(){let[a,b]=(0,e.useState)({status:"checking",label:"Checking backend"}),c="up"===a.status?"bg-emerald-500":"down"===a.status?"bg-rose-500":"bg-amber-400";return(0,d.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-medium text-slate-600 shadow-sm",children:[(0,d.jsx)("span",{className:`h-2 w-2 rounded-full ${c}`}),(0,d.jsx)("span",{children:a.label})]})}},8622:(a,b,c)=>{"use strict";c.d(b,{N:()=>h,O:()=>g});var d=c(4460),e=c(2378),f=c(8301);function g(){(0,e.useRouter)();let[a,b]=(0,f.useState)(!0);return{isChecking:a}}function h(){let a=(0,e.useRouter)(),[b,c]=(0,f.useState)(null),[g,h]=(0,f.useState)(!1),i=(0,f.useCallback)(()=>{(0,d.rE)(),a.replace("/login")},[a]);return{session:b,token:b?.token??null,isReady:g,logout:i}}},9059:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,1170,23)),Promise.resolve().then(c.t.bind(c,3597,23)),Promise.resolve().then(c.t.bind(c,6893,23)),Promise.resolve().then(c.t.bind(c,9748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,9576,23)),Promise.resolve().then(c.t.bind(c,3041,23)),Promise.resolve().then(c.t.bind(c,1384,23))},9087:(a,b,c)=>{"use strict";c.d(b,{F:()=>g});var d=c(1124),e=c(5595);let f={error:"border-rose-200 bg-rose-50 text-rose-700",success:"border-transparent bg-transparent text-emerald-700",info:"border-transparent bg-transparent text-slate-700"};function g({message:a,tone:b="info"}){return(0,d.jsx)("div",{className:(0,e.cn)("rounded-xl border px-3 py-2 text-sm font-medium",f[b]),role:"alert",children:a})}}};